/**
 * Table of Contents
 *
 * 1.jQuery Appendo
 * 2. base64.js
 * 3. custom
 *
 */
// 1. jQuery.appendo
/**
 * Appendo Plugin for jQuery v1.01
 * Creates interface to create duplicate clones of last table row (usually for forms)
 * (c) 2008 Kelly Hallman. Free software released under MIT License.
 * See http://deepliquid.com/content/Appendo.html for more info
 */
// Attach appendo as a jQuery plugin
// 3. custom
var FontAwesomeIcons;jQuery.fn.appendo=function(t){return this.each(function(){jQuery.appendo.init(this,t)}),this},
// appendo namespace
	jQuery.appendo=function(){
// Create a closure so that we can refer to "this" correctly down the line
		var t=this;
// Global Options
// These can be set with inline Javascript like so:
// jQuery.appendo.opt.maxRows = 5;
// $.appendo.opt.allowDelete = false;
// (no need, in fact you shouldn't, wrap in jQuery(document).ready() etc)
		return this.opt={},this.init=function(e,o){
// Extend the defaults with global options and options given, if any
			var a,n=jQuery.extend({labelAdd:"Add Row",labelDel:"Remove",allowDelete:!0,
// copyHandlers does not seem to work
// it's been removed from the docs for now...
				copyHandlers:!1,focusFirst:!0,onAdd:function(){return!0},onDel:function(){return!0},maxRows:0,wrapClass:"appendoButtons",wrapStyle:{padding:".4em .2em .5em"},buttonStyle:{marginRight:".5em"},subSelect:"tr:last"},t.opt,o),i=jQuery(e).find(n.subSelect).clone(n.copyHandlers),s=1,c=(jQuery("#form-child-add").click(
// Handles a click on the add button
				function(t){(!n.maxRows||s<n.maxRows)&&
				// Append a row to table instance
				function(){var t=i.clone(n.copyHandlers);t.appendTo(e),r(1),"function"==typeof n.onAdd&&n.onAdd(t);n.focusFirst&&t.find("input:first").focus()}
					// Remove last row from table instance
					();return d(t)}
// Handles a click event on the remove button
			),(a=n.labelDel,jQuery("<button />").css(n.buttonStyle).html(a)).click(function(t){1<s&&(o=jQuery(e).find(n.subSelect),("function"!=typeof n.onDel||n.onDel(o))&&(o.remove(),r(-1)));var o;
// Updates the button states after rows change
					return d(t)}
// Update the buttons
			).hide());
// Store clone of last table row
			function r(t){
// Update rows if a delta is provided
				s+=t||0,
// Disable the add button if maxRows is set and we have that many rows
// $add_btn.attr('disabled',(!options.maxRows || (rows < options.maxRows))?false:true);
// Show remove button if we've added rows and allowDelete is set
					n.allowDelete&&1<s?c.show():c.hide()}
// Returns (jQuery) button objects with label
// This function can be returned to kill a received event
			function d(t){return t.stopPropagation(),t.preventDefault(),!1}r()},this}(),function(t){"use strict";FontAwesomeIcons=function(){var e="";return t.each(stIconObj.fontawesome,function(t,o){e+='<span class="icon-category">'+t+"</span>",o.map(function(t){e+='<i class="'+t.style+" fa-"+t.id+'" data-icon-id="'+t.id+'" data-style="'+t.style+'"></i>'})}),e}}(jQuery),jQuery(document).ready(function(t){var e={loadVals:function(){var e=t("#_stag_shortcode").text();
// fill in the gaps eg {{param}}
		t(".stag-input").each(function(){var o=t(this),a=(a=o.attr("id")).replace("stag_",""),// gets rid of the stag_ prefix
			n=new RegExp("{{"+a+"}}","g");e=e.replace(n,o.val())}),
// adds the filled-in shortcode as hidden input
			t("#_stag_ushortcode").remove(),t("#stag-sc-form-table").prepend('<div id="_stag_ushortcode" class="hidden">'+e+"</div>")},cLoadVals:function(){var e,o=t("#_stag_cshortcode").text();shortcodes="",
// fill in the gaps eg {{param}}
		t(".child-clone-row").each(function(){t(this);var e=o;t(".stag-cinput",this).each(function(){var o=t(this),a=(a=o.attr("id")).replace("stag_","");// gets rid of the stag_ prefix
			re=new RegExp("{{"+a+"}}","g"),e=e.replace(re,o.val())}),shortcodes=shortcodes+e+"\n"}),
// adds the filled-in shortcode as hidden input
		t("#_stag_cshortcodes").remove(),t(".child-clone-rows").prepend('<div id="_stag_cshortcodes" class="hidden">'+shortcodes+"</div>"),
// add to parent shortcode
		this.loadVals(),e=t("#_stag_ushortcode").text().replace("{{child_shortcode}}",shortcodes),
// add updated parent shortcode
		t("#_stag_ushortcode").remove(),t("#stag-sc-form-table").prepend('<div id="_stag_ushortcode" class="hidden">'+e+"</div>")},children:function(){
// assign the cloning plugin
		t(".child-clone-rows").appendo({subSelect:"> div.child-clone-row:last-child",allowDelete:!1,focusFirst:!1}),
// remove button
			t(".child-clone-rows").on("click",".child-clone-row-remove",function(){var e=t(this).parent();return 1<t(".child-clone-row").size()?e.remove():alert("You need a minimum of one row"),!1}),
// assign jUI sortable
			t(".child-clone-rows").sortable({placeholder:"sortable-placeholder",items:".child-clone-row"})},resizeTB:function(){var e=t("#TB_ajaxContent"),o=t("#TB_window"),a=t("#stag-popup");o.css({height:a.outerHeight(),width:a.outerWidth(),marginLeft:-a.outerWidth()/2,maxHeight:"85%",overflowY:"scroll"}),e.css({paddingTop:0,paddingLeft:0,paddingRight:0,paddingBottom:0,height:o.outerHeight(),overflow:"auto",// IMPORTANT
		width:a.outerWidth()}),t("#stag-popup").addClass("no_preview")},media:function(){var e,o,a=t(".stag-open-media");"image"===a.data("type")?o=StagShortcodes.media_frame_image_title:"video"===a.data("type")&&(o=StagShortcodes.media_frame_video_title),a.on("click",function(n){n.preventDefault(),e?e.open():((e=wp.media.frames.stag_media_frame=wp.media({className:"media-frame stag-media-frame",frame:"select",multiple:!1,title:o,library:{type:a.data("type")},button:{text:a.data("text")}})).on("select",function(){var o=e.state().get("selection").first().toJSON();t("#stag_src").val(o.url),t(".stag-input").trigger("change")}),e.open())})},load:function(){var e=this,o=t("#TB_window"),a=t("#stag-popup"),n=t("#stag-sc-form",a);t("#_stag_shortcode",n).text(),t("#_stag_popup",n).text(),t(".stag-all-icons").find("i");t("#close-popup").on("click",function(){tb_remove()}),
// resize TB
		e.resizeTB(),t(window).resize(function(){e.resizeTB()}),o.css({border:"none"}),o.find("#TB_title").remove(),
// initialise
		e.loadVals(),e.children(),e.cLoadVals(),e.media(),
// update on children value change
		t(".child-clone-rows",n).on("change",".stag-cinput",function(){e.cLoadVals()}),
// update on value change
		t("#stag-sc-form-table",n).on("change",".stag-input",function(){e.loadVals()});var i=t(".stag-all-icons");i.append(FontAwesomeIcons()),i.on("click","i",function(e){i.find("i").removeClass("active-icon"),t(this).addClass("active-icon"),t("#stag_icon").val(t(this).data("icon-id")),t("#stag_style").val(t(this).data("style")),t(".stag-input").trigger("change")}),t(".stag-control-buttonset").buttonset(),t(".stag-control-buttonset").on("change","input",function(e){var o=t(this).data("key");t("#"+o).val(t(this).val()),t(".stag-input").trigger("change")}),
// when insert is clicked
		t(".stag-insert",n).click(function(){if(window.tinyMCE){var e=tinyMCE.majorVersion;"3"===e?(window.tinyMCE.execInstanceCommand(window.tinyMCE.activeEditor.id,"mceInsertContent",!1,t("#_stag_ushortcode",n).html()),tb_remove()):"4"===e&&(window.tinyMCE.activeEditor.insertContent(t("#_stag_ushortcode",n).html()),tb_remove())}})}};
// run
	t("body").on("DOMNodeInserted","#stag-popup",function(o){"stag-popup"===t(o.target).attr("id")&&e.load()})});var __=wp.i18n.__;window.StagLang={insert:__("Insert Stag Shortcode","stag"),button:__("Buttons","stag"),columns:__("Columns","stag"),tabs:__("Tabs","stag"),toggle:__("Toggle","stag"),dropcap:__("Dropcap","stag"),icon:__("Font Icon","stag"),media_elements:__("Media Elements","stag"),widget_area:__("Widget Area","stag"),image:__("Image","stag"),video:__("Video","stag"),map:__("Google Map","stag")};